{"name":"Esq","tagline":"Simple query builder for elasticsearch","body":"# ESQ (Elasticsearch Query)\r\n\r\n[![Build Status](https://travis-ci.org/holidayextras/esq.png?branch=master)](https://travis-ci.org/holidayextras/esq)\r\n\r\nI wanted an easy way to build elasticsearch queries without having to writing lots and lots of code just for the structure of the query. For that reason I created ESQ, a very simple but powerful tool that will do all of the object creation for you.\r\n\r\n---\r\n\r\n## Download\r\n`npm install esq` or `bower intall esq`\r\n\r\n---\r\n\r\n## Quick Example\r\n\r\n__Example__\r\n```javascript\r\nvar ESQ = require('esq');\r\nvar esq = new ESQ();\r\n\r\nesq.query('bool', ['must'], { match: { user: 'kimchy' } });\r\nesq.query('bool', 'minimum_should_match', 1);\r\n\r\nvar query = esq.getQuery();\r\n```\r\n\r\n__Generates__\r\n```json\r\n{\r\n  \"bool\": {\r\n    \"must\": [\r\n      {\r\n        \"match\": {\r\n          \"user\": \"kimchy\"\r\n        }\r\n      }\r\n    ],\r\n    \"minimum_should_match\": 1\r\n  }\r\n}\r\n```\r\n\r\n---\r\n\r\n## In the browser\r\n\r\n```html\r\n<script src=\"esq.js\"></script>\r\n<script>\r\n  var esq = new ESQ();\r\n  esq.query('bool', ['must'], { match: { user: 'kimchy' } });\r\n  var query = esq.getQuery();\r\n</script>\r\n```\r\n\r\n---\r\n\r\n## Documentation\r\n\r\n### esq.getQuery();\r\nThis will return the query at the current stage.\r\n\r\n__Example__\r\n```javascript\r\nesq.query('bool', ['must'], { match: { foo: 'bar' } });\r\nvar query = esq.getQuery();\r\n```\r\n\r\n__Generates__\r\n```json\r\n{\r\n  \"bool\": {\r\n    \"must\": [\r\n      {\r\n        \"match\": {\r\n          \"foo\": \"bar\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n---\r\n\r\n### esq.query(str, ..., str, value);\r\nYou can pass this function as many strings as you want and you'll receive a nested object with the arguments as keys. The final argument should always be the object you want to assign to the second to last argument. This function will always return the query at its current state.\r\n\r\n__Example__\r\n```javascript\r\nesq.query('filtered', 'query', { match: { foo: 'bar' } });\r\n```\r\n\r\n__Generates__\r\n```json\r\n{\r\n  \"filtered\": {\r\n    \"query\": {\r\n      \"match\": {\r\n        \"foo\": \"bar\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n#### Array Arguments\r\n\r\nThe function also allows you to pass in an argument as an array (e.g. `['must']`). This tells the function that you want that key to be an array and so it'll push the following arguments into the array.\r\n\r\n__Example__\r\n```javascript\r\nesq.query('filtered', 'query', 'bool', ['must'], { match: { 'foo': 'bar' } });\r\n```\r\n\r\n__Generates__\r\n```json\r\n{\r\n  \"filtered\": {\r\n    \"query\": {\r\n      \"bool\": {\r\n        \"must\": [\r\n          {\r\n            \"match\": {\r\n              \"foo\": \"bar\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n---\r\n\r\n## Tests\r\n\r\nThis module is fully tested, run the tests using `mocha`.\r\n","google":"UA-29469723-2","note":"Don't delete this file! It's used internally to help with page regeneration."}